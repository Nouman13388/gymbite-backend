{
    "info": {
        "name": "Gymbite Meal Plan API",
        "description": "Testing collection for Gymbite backend meal plan and meal endpoints",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:3000",
            "type": "string"
        },
        {
            "key": "firebase_token",
            "value": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImE1YTAwNWU5N2NiMWU0MjczMDBlNTJjZGQ1MGYwYjM2Y2Q4MDYyOWIiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vZ3ltYml0ZSIsImF1ZCI6Imd5bWJpdGUiLCJhdXRoX3RpbWUiOjE3NjAxMjQ3MDgsInVzZXJfaWQiOiJCM1FzOXZpYWdIVDJDR3hqWmFnbk9iR3JFS2QyIiwic3ViIjoiQjNRczl2aWFnSFQyQ0d4alphZ25PYkdyRUtkMiIsImlhdCI6MTc2MDEyNDcwOCwiZXhwIjoxNzYwMTI4MzA4LCJlbWFpbCI6InRlc3RhZG1pbkBneW1iaXRlLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZmlyZWJhc2UiOnsiaWRlbnRpdGllcyI6eyJlbWFpbCI6WyJ0ZXN0YWRtaW5AZ3ltYml0ZS5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.D2yugorFywC1WsmHxcwM_mwzIcsq9U6uve5gy4lJeSgFTwdOEcPpYTx6RsBQJCy49QUkaaCbV39Agr-ZXqeF8R72xhvxqrH43tIz_E661V2sLioH7LhF52WsfrB_UpqGhzCXzkmNoSXetKoOifinvCwRNtXi9UbIUb30YTQyq6Z4jUCnyzJ07KXKuBS145bzo82jJcTDti21gCnZyzXuJ5ZSf2At36riykUazFTjZBzcwdx52Hd6VgCI1po20L6MMn5wNprLtexi30Zbmg387SGkkCRsJJn386Xt7ht-9yMsynKeuzIbEZJ-yIbTv2ouqpyI4PcVhz4i4KEr1qaGbw",
            "type": "string"
        },
        {
            "key": "meal_plan_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "meal_id",
            "value": "",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "Meal Plans",
            "item": [
                {
                    "name": "Create Meal Plan",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"High Protein Muscle Building Plan\",\n  \"description\": \"A comprehensive meal plan focused on muscle building with high protein content\",\n  \"category\": \"muscle_building\",\n  \"imageUrl\": \"https://example.com/muscle-building-plan.jpg\",\n  \"meals\": [\n    {\n      \"name\": \"Protein Power Breakfast\",\n      \"description\": \"High protein breakfast to kickstart your day\",\n      \"calories\": 450,\n      \"protein\": 35,\n      \"carbs\": 30,\n      \"fat\": 18,\n      \"ingredients\": [\"3 eggs\", \"2 slices whole grain bread\", \"1 avocado\", \"Greek yogurt\"],\n      \"instructions\": \"Scramble eggs, toast bread, slice avocado, serve with yogurt\",\n      \"mealType\": \"breakfast\",\n      \"preparationTime\": 15,\n      \"imageUrl\": \"https://example.com/protein-breakfast.jpg\"\n    },\n    {\n      \"name\": \"Grilled Chicken Lunch\",\n      \"description\": \"Lean protein with complex carbs\",\n      \"calories\": 520,\n      \"protein\": 45,\n      \"carbs\": 35,\n      \"fat\": 15,\n      \"ingredients\": [\"200g chicken breast\", \"1 cup brown rice\", \"Mixed vegetables\"],\n      \"instructions\": \"Grill chicken, cook rice, steam vegetables\",\n      \"mealType\": \"lunch\",\n      \"preparationTime\": 25,\n      \"imageUrl\": \"https://example.com/grilled-chicken.jpg\"\n    }\n  ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/meal-plans",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meal-plans"
                            ]
                        },
                        "description": "Create a new meal plan with nested meals"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "// Save meal plan ID for other requests",
                                    "if (pm.response.code === 201) {",
                                    "    const response = pm.response.json();",
                                    "    pm.collectionVariables.set('meal_plan_id', response.id);",
                                    "    console.log('Meal Plan ID saved:', response.id);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Get All Meal Plans",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/meal-plans",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meal-plans"
                            ]
                        },
                        "description": "Get all meal plans for the authenticated user"
                    }
                },
                {
                    "name": "Get Meal Plan by ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/meal-plans/{{meal_plan_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meal-plans",
                                "{{meal_plan_id}}"
                            ]
                        },
                        "description": "Get a specific meal plan by ID"
                    }
                },
                {
                    "name": "Update Meal Plan",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Updated High Protein Plan\",\n  \"description\": \"Updated description for muscle building plan\",\n  \"category\": \"muscle_building\",\n  \"imageUrl\": \"https://example.com/updated-image.jpg\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/meal-plans/{{meal_plan_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meal-plans",
                                "{{meal_plan_id}}"
                            ]
                        },
                        "description": "Update an existing meal plan"
                    }
                },
                {
                    "name": "Delete Meal Plan",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/meal-plans/{{meal_plan_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meal-plans",
                                "{{meal_plan_id}}"
                            ]
                        },
                        "description": "Delete a meal plan and all associated meals"
                    }
                }
            ]
        },
        {
            "name": "Individual Meals",
            "item": [
                {
                    "name": "Get Meals for Meal Plan",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/meals/meal-plan/{{meal_plan_id}}/meals",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meals",
                                "meal-plan",
                                "{{meal_plan_id}}",
                                "meals"
                            ]
                        },
                        "description": "Get all meals for a specific meal plan"
                    }
                },
                {
                    "name": "Create Individual Meal",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Post-Workout Shake\",\n  \"description\": \"High protein shake for post-workout recovery\",\n  \"calories\": 300,\n  \"protein\": 40,\n  \"carbs\": 20,\n  \"fat\": 5,\n  \"ingredients\": [\"Whey protein\", \"Banana\", \"Almond milk\", \"Honey\"],\n  \"instructions\": \"Blend all ingredients until smooth\",\n  \"mealType\": \"snack\",\n  \"preparationTime\": 5,\n  \"imageUrl\": \"https://example.com/protein-shake.jpg\",\n  \"mealPlanId\": \"{{meal_plan_id}}\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/meals",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meals"
                            ]
                        },
                        "description": "Create a new individual meal"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "// Save meal ID for other requests",
                                    "if (pm.response.code === 201) {",
                                    "    const response = pm.response.json();",
                                    "    pm.collectionVariables.set('meal_id', response.id);",
                                    "    console.log('Meal ID saved:', response.id);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ]
                },
                {
                    "name": "Get Meal by ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/meals/{{meal_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meals",
                                "{{meal_id}}"
                            ]
                        },
                        "description": "Get a specific meal by ID"
                    }
                },
                {
                    "name": "Update Individual Meal",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Updated Post-Workout Shake\",\n  \"description\": \"Enhanced protein shake with added nutrients\",\n  \"calories\": 350,\n  \"protein\": 45,\n  \"carbs\": 25,\n  \"fat\": 6,\n  \"ingredients\": [\"Whey protein\", \"Banana\", \"Almond milk\", \"Honey\", \"Oats\"],\n  \"instructions\": \"Blend all ingredients until smooth, add ice if desired\",\n  \"mealType\": \"snack\",\n  \"preparationTime\": 7,\n  \"imageUrl\": \"https://example.com/enhanced-protein-shake.jpg\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/api/meals/{{meal_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meals",
                                "{{meal_id}}"
                            ]
                        },
                        "description": "Update an existing meal"
                    }
                },
                {
                    "name": "Delete Individual Meal",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{firebase_token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/meals/{{meal_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meals",
                                "{{meal_id}}"
                            ]
                        },
                        "description": "Delete an individual meal"
                    }
                }
            ]
        },
        {
            "name": "Test Authentication",
            "item": [
                {
                    "name": "Test Unauthorized Access",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/meal-plans",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "meal-plans"
                            ]
                        },
                        "description": "Test endpoint without authentication - should return 401"
                    }
                }
            ]
        }
    ]
}